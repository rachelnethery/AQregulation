# AQregulation

This repository contains the code for the paper "Causal inference and machine learning approaches for evaluation of the health impacts of large-scale air quality regulations".

The folder 'real_data' contains code to reproduce the main results in the text (Section 5, Table 2 and Figure 2) for a synthetic dataset. The master script, ‘realdata_master.R’, does the following: (1) generates and exports the synthetic data to an .RData file; (2) reads in the data, conducts the analyses, and exports the results to a .txt file; (3) reads in results to create Table 2, which is saved in a file named ‘table_2.txt’; and (4) reads in the results to create Figure 2, which is saved in a file named ‘figure_2.pdf’. If all the files/scripts are placed in a folder with the same structure as the github repository, then the master script can be run without any changes to produce these results. The files ‘table_2_verify.txt’ and ‘figure_2_verify.pdf’ can be used to verify that the user has obtained the same results that we obtained for the synthetic data. Expected run time on a standard desktop machine: 2 hours.

The folder 'sims' contains code to reproduce the simulation results shown in the text (Section 4), but substantial computing time or the ability to parallelize the simulations may be needed to reproduce all results. The master script, ‘simulation_master.R’, generates the data and then runs each of the competing methods on the dataset. Using the instructions at the top of the master script, users can set parameter values to select the simulation type, tuning parameters, and number of simulations they wish to test.  Data frames containing the results are exported into an .RData file. If all the files are placed in a folder with the same structure as the github repository, then the master script can be run without any changes. Expected run time on a standard desktop machine: 30 mins per simulated dataset.
